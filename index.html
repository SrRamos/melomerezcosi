<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¡Gracias por tu compra! - MeLoMerezcoSi</title>
    <style>
        :root {
            --color-primary: #D4AF37; /* Gold accent color */
            --color-secondary: #000000; /* Pure black for backgrounds */
            --color-accent: #00ff88; /* Soft pink accent */
            --color-text: #F4F2EC; /* Pure white text for contrast */
            --color-text-secondary: #E5E5E5; /* Light gray for secondary text */
            --color-background: #0A0A0A; /* Nearly black background */
            --color-card-bg: #141414; /* Slightly lighter black for cards */
            --color-success: #D4AF37; /* Using gold for success indicators */
            --color-border: #2A2A2A; /* Dark gray for borders */
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--color-text);
            background-color: var(--color-background);
        }

        .header {
            background-color: var(--color-secondary);
            color: white;
            padding-top: 20px;
            border-radius: 8px 8px 0 0;
            margin-top: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo {
            max-width: 200px;
            margin-bottom: 20px;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            background-color: var(--color-accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            color: var(--color-secondary);
            font-size: 40px;
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
        }

        h1 {
            color: white;
            margin-bottom: 15px;
            font-size: 28px;
        }

        .subtitle {
            color: white;
            font-size: 18px;
            margin-bottom: 5px;
            padding-bottom: 30px;
        }

        .order-details {
            background-color: var(--color-card-bg);
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 25px;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 20px;
            margin-bottom: 15px;
            color: var(--color-primary);
            font-weight: bold;
            border-bottom: 1px solid var(--color-border);
            padding-bottom: 10px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .product-name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .order-number {
            font-size: 18px;
            color: var(--color-text);
            margin-bottom: 10px;
        }

        .product-item {
            display: flex;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--color-border);
        }

        .product-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 4px;
            margin-right: 15px;
            background-color: #2c3a4a;
        }

        .product-info {
            flex: 1;
        }

        .product-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .order-summary {
            margin-top: 20px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .total-row {
            font-weight: bold;
            font-size: 18px;
            border-top: 2px solid var(--color-border);
            padding-top: 10px;
            margin-top: 10px;
        }

        .whatsapp-section {
            background-color: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin-bottom: 30px;
            color: #030815;
        }

        .whatsapp-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--color-primary), var(--color-accent));
        }

        .whatsapp-title {
            font-size: 20px;
            margin-bottom: 15px;
        }

        .whatsapp-text {
            margin-bottom: 25px;
            font-size: 16px;
        }

        .whatsapp-button {
            display: inline-block;
            background-color: #25D366;
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: bold;
            text-decoration: none;
            font-size: 18px;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 8px rgba(37, 211, 102, 0.4);
            margin-bottom: 10px;
            cursor: pointer;
        }

        .whatsapp-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(37, 211, 102, 0.5);
        }

        .whatsapp-button i {
            margin-right: 8px;
        }

        .whatsapp-note {
            font-size: 14px;
            margin-top: 10px;
        }

        .additional-info {
            background-color: var(--color-card-bg);
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 25px;
            margin-bottom: 30px;
        }

        .next-steps {
            margin-top: 10px;
            color: var(--color-text-secondary);
        }

        .next-step-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .step-number {
            background-color: var(--color-primary);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 4px 8px rgba(37, 211, 102, 0.4);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 8px 16px rgba(37, 211, 102, 0.5);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 4px 8px rgba(37, 211, 102, 0.4);
            }
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--color-border);
            font-size: 14px;
            color: var(--color-text-secondary);
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            h1 {
                font-size: 24px;
            }

            .subtitle {
                font-size: 16px;
            }

            .whatsapp-button {
                padding: 12px 25px;
                font-size: 16px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div style="background-color: var(--color-secondary); padding: 10px; border-radius: 5px; display: inline-block;">
                <img src="https://cdn.shopify.com/s/files/1/0905/3264/3117/files/logotipo_2x_b9df3e31-f557-4abd-8450-74d25df2ccae.png?v=1739636751" alt="MeLoMerezcoSi Logo" class="logo" style="margin-bottom: 0;">
            </div>
            <div class="success-icon">
                <i class="fas fa-check"></i>
            </div>
            <h1>¡Gracias por tu compra!</h1>
            <p class="subtitle">Tu pedido ha sido recibido y se procesará una vez lo confirmes por WhatsApp haciendo click en el botón de abajo.</p>
        </div>

        <div class="order-details">
            <div class="section-header">
                <h2 class="section-title">Detalles de tu orden</h2>
            </div>
            <div class="product-name" id="product-title">{product_title}</div>
            <div class="order-number"><strong>Orden</strong> #<span id="order-number">{order_number}</span></div>

            <div class="product-list">
                <!-- Producto dinámico que se llenará con JavaScript -->
                <div class="product-item">
                    <div class="product-info">
                    </div>
                </div>
            </div>
        </div>

        <div class="whatsapp-section">
            <h2 class="whatsapp-title">¡Solo un paso más!</h2>
            <p class="whatsapp-text">Para garantizar una entrega rápida y sin problemas, necesitamos confirmar los detalles de tu pedido. Haz clic en el botón para confirmar por WhatsApp:</p>
            <a id="whatsapp-button" class="whatsapp-button pulse-animation">
                <i class="fab fa-whatsapp"></i> Confirmar mi pedido
            </a>
            <p class="whatsapp-note">* Nuestro equipo de atención al cliente está esperando para atenderte y resolver cualquier duda.</p>
        </div>

        <div class="additional-info">
            <h2 class="section-title">Información Adicional</h2>
            <p>Tu pedido será procesado en las próximas 24 horas. Recibirás actualizaciones sobre el estado de tu pedido por correo electrónico.</p>

            <div class="next-steps">
                <h3>Próximos pasos:</h3>
                <div class="next-step-item">
                    <div class="step-number">1</div>
                    <div>Confirma tu pedido por WhatsApp (importante para procesar tu envío)</div>
                </div>
                <div class="next-step-item">
                    <div class="step-number">2</div>
                    <div>Tu pedido será preparado y empacado cuidadosamente</div>
                </div>
                <div class="next-step-item">
                    <div class="step-number">3</div>
                    <div>Recibirás información de seguimiento por correo electrónico</div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>© 2025 MeLoMerezcoSi. Todos los derechos reservados.</p>
            <p>¿Tienes alguna pregunta? Contáctanos en alice@melomerezcosi.com</p>
        </div>
    </div>

    <script>
        // Función para obtener parámetros de la URL
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Actualizar los campos con datos dinámicos si están disponibles
        window.onload = function() {
            // Obtener datos del producto desde URL o usar valores por defecto
            const productTitle = getQueryParam('product_title') || '{product_title}';
            const orderId = getQueryParam('order_id') || '{order_id}';
            const orderNumber = getQueryParam('order_number') || '{order_number}';

            // Validate parameters
            const isValidOrder = orderNumber && orderNumber !== '{order_number}';
            const isValidProduct = productTitle && productTitle !== '{product_title}';

            // Update elements in the page
            if (document.getElementById('product-title')) {
                document.getElementById('product-title').textContent = isValidProduct ? productTitle : 'Producto no especificado';
            }

            if (document.getElementById('order-number')) {
                document.getElementById('order-number').textContent = isValidOrder ? orderNumber : 'Número de orden no especificado';
            }

            // Configure WhatsApp button
            const whatsappButton = document.getElementById('whatsapp-button');
            if (whatsappButton) {
                if (!isValidOrder || !isValidProduct) {
                    whatsappButton.style.backgroundColor = '#cccccc';
                    whatsappButton.style.cursor = 'not-allowed';
                    whatsappButton.title = 'Información de orden incompleta';
                } else {
                    whatsappButton.addEventListener('click', function() {
                        // Show loading state
                        const originalText = this.innerHTML;
                        this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Abriendo WhatsApp...';
                        this.style.backgroundColor = '#1a9247';

                        // Construct a more professional message
                        const message = `¡Hola! quiero confirmar mi pedido #${orderNumber}.\n\n` +
                            `- Producto: ${productTitle}\n` +
                            `- Número de orden: ${orderNumber}\n\n` +
                            `Por favor, ¿podrías confirmarme el recibido de mi pedido y los siguientes pasos?\n\n` +
                            `¡Gracias!`;

                        const encodedMessage = encodeURIComponent(message);
                        const whatsappUrl = `https://wa.me/+573204372777?text=${encodedMessage}`;

                        // Open WhatsApp in a new window
                        setTimeout(() => {
                            window.open(whatsappUrl, '_blank');
                            // Reset button state
                            this.innerHTML = originalText;
                            this.style.backgroundColor = '#25D366';
                        }, 500);
                    });
                }
            }
        };
    </script>
</body>
</html>
